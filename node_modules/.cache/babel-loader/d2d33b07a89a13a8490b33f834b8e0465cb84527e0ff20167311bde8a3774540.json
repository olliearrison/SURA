{"ast":null,"code":"import { draw } from \"./DrawHelper.js\";\nimport { arcRenderer } from '../App.vue';\n//import * as THREE from \"three\";\n//import { renderer, scene, camera } from \"../App.vue\";\n\nlet drawing = false;\nexport default {\n  name: 'DrawingInput',\n  data() {\n    return {\n      isDrawing: false,\n      isEraserMode: false,\n      stroke: {\n        show_stroke: true,\n        lineWidth: .25,\n        color: 0x000000\n      }\n    };\n  },\n  mounted() {\n    // document.body \n    const button = this.$refs.eraserButton;\n    button.addEventListener('click', () => {\n      console.log(\"pointer down\");\n      this.isEraserMode = !this.isEraserMode;\n    });\n    document.body.addEventListener('mouseup', event => {\n      if (this.inCanvas(event)) {\n        this.handleMouseUp();\n        drawing = false;\n      }\n    });\n    document.body.addEventListener('mousedown', event => {\n      if (this.inCanvas(event)) {\n        drawing = true;\n        this.handleMouseDown(event);\n      }\n    });\n    document.body.addEventListener('pointermove', event => {\n      //console.log(event.pressure);\n      if (event.pressure > 0) {\n        this.stroke.lineWidth = event.pressure * .5;\n      }\n    });\n    document.body.addEventListener('mousemove', event => {\n      //console.log(event.pressure);\n      if (this.inCanvas(event)) {\n        if (drawing) {\n          this.handleMouseMove(event);\n        }\n      } else {\n        if (drawing) {\n          this.handleMouseUp();\n          drawing = false;\n        }\n      }\n    });\n    //this.handleMouseMove(event);\n  },\n\n  methods: {\n    inCanvas(event) {\n      var rect = arcRenderer.domElement.getBoundingClientRect();\n      var centerX = rect.left + rect.width / 2;\n      var centerY = rect.top + rect.height / 2;\n      const dx = event.clientX - centerX;\n      const dy = event.clientY - centerY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      if (distance < rect.width / 2) {\n        return false;\n      }\n      return true;\n    },\n    handleMouseMove(event) {\n      if (!this.isDrawing) return;\n      let x = event.clientX;\n      let y = event.clientY;\n      // Assuming a 2D drawing, so Z is constant, but this could be modified as per the requirement.\n      draw.onMove(x, y, this.stroke);\n    },\n    handleMouseDown(event) {\n      //console.log(\"mouse down\");\n      this.isDrawing = true;\n      let x = event.clientX;\n      let y = event.clientY;\n      draw.onStart(x, y, this.stroke);\n    },\n    handleMouseUp() {\n      this.isDrawing = false;\n      draw.onEnd();\n    },\n    handleClick() {\n      // Your function logic here\n      console.log('Button clicked!');\n      console.log(\"hiiiii\");\n    },\n    toggleEraserMode() {\n      console.log(\"hi\");\n    }\n  }\n};","map":{"version":3,"names":["draw","arcRenderer","drawing","name","data","isDrawing","isEraserMode","stroke","show_stroke","lineWidth","color","mounted","button","$refs","eraserButton","addEventListener","console","log","document","body","event","inCanvas","handleMouseUp","handleMouseDown","pressure","handleMouseMove","methods","rect","domElement","getBoundingClientRect","centerX","left","width","centerY","top","height","dx","clientX","dy","clientY","distance","Math","sqrt","x","y","onMove","onStart","onEnd","handleClick","toggleEraserMode"],"sources":["/Users/olliearrison/Desktop/SURA/src/components/DrawingInput.vue"],"sourcesContent":["<template>\n    <div class=\"drawing-input\">\n        <v-btn class=\"fixed-button\" ref=\"eraserButton\" @click=\"toggleEraserMode\">\n            <v-icon>\n                {{ isEraserMode ? 'mdi-eraser-off' : 'mdi-eraser' }}\n            </v-icon>\n            {{ isEraserMode ? 'Disable Eraser Mode' : 'Enable Eraser Mode' }}\n        </v-btn>\n    </div>\n    \n</template>\n  \n<script>\nimport { draw } from \"./DrawHelper.js\";\nimport { arcRenderer } from '../App.vue';\n//import * as THREE from \"three\";\n//import { renderer, scene, camera } from \"../App.vue\";\n\nlet drawing = false;\n\n\nexport default {\n    name: 'DrawingInput',\n\n    data(){\n        return {\n            isDrawing: false,\n            isEraserMode: false,\n            stroke: {\n                show_stroke: true,\n                lineWidth: .25,\n                color: 0x000000,\n            }\n        };\n    },\n    mounted (){\n        // document.body \n        const button = this.$refs.eraserButton;\n        \n        button.addEventListener('click', () => {\n            console.log(\"pointer down\");\n            this.isEraserMode = !this.isEraserMode;\n        });\n\n\n        document.body.addEventListener('mouseup', (event) => {\n            if (this.inCanvas(event)){\n                this.handleMouseUp();\n                drawing = false;\n            }\n        });\n\n        document.body.addEventListener('mousedown', (event) => {\n            if (this.inCanvas(event)) {\n                drawing = true;\n                this.handleMouseDown(event);\n            }\n        });\n\n        document.body.addEventListener('pointermove', (event) => {\n            //console.log(event.pressure);\n            if (event.pressure > 0){\n                this.stroke.lineWidth = event.pressure * .5;\n            }\n\n        });\n\n        document.body.addEventListener('mousemove', (event) => {\n            //console.log(event.pressure);\n            if (this.inCanvas(event)) {\n                if (drawing) {\n                    this.handleMouseMove(event);\n                }\n            } else {\n                if (drawing){\n                    this.handleMouseUp();\n                    drawing = false;\n                }\n            }\n        });\n        //this.handleMouseMove(event);\n\n       \n\n    },\n    methods: {\n        inCanvas( event ) {\n            var rect = arcRenderer.domElement.getBoundingClientRect();\n            var centerX = rect.left + rect.width / 2;\n            var centerY = rect.top + rect.height / 2;\n\n            const dx = event.clientX - centerX;\n            const dy = event.clientY - centerY;\n            const distance = Math.sqrt(dx * dx + dy * dy);\n\n            if (distance < rect.width/2){\n                return false;\n            }\n            return true;\n        },\n        handleMouseMove(event) {\n            if (!this.isDrawing) return;\n            let x = event.clientX;\n            let y = event.clientY;\n            // Assuming a 2D drawing, so Z is constant, but this could be modified as per the requirement.\n            draw.onMove(x, y, this.stroke);\n        },\n        handleMouseDown(event) {\n            //console.log(\"mouse down\");\n            this.isDrawing = true;\n            let x = event.clientX;\n            let y = event.clientY;\n            draw.onStart(x, y, this.stroke);\n        },\n        handleMouseUp() {\n            this.isDrawing = false;\n            draw.onEnd();\n        },\n        handleClick() {\n            \n        // Your function logic here\n        console.log('Button clicked!');\n        console.log(\"hiiiii\");\n        },\n        toggleEraserMode() {\n            console.log(\"hi\")\n        }\n    }\n}\n</script>\n\n<style scoped>\n.drawing-input {\n    width: 100%;\n    height: 100%;\n}\n\n.fixed-button {\n  position: fixed;\n  top: 20px; /* Adjust the bottom value as needed */\n  left: 20px; /* Adjust the right value as needed */\n  z-index: 999; /* Set an appropriate z-index if necessary */\n  /* Add any other desired styles */\n}\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}