{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { WebGLRenderer } from 'three';\nimport { camera, drawSceneList, plane } from '../App.vue';\nexport default {\n  data() {\n    return {\n      model: null,\n      renderers: [],\n      renderedCards: new Set()\n    };\n  },\n  mounted() {\n    this.initializeScene();\n  },\n  methods: {\n    initializeScene() {\n      const cardElements = Object.values(this.$refs).filter(ref => ref.startsWith('cardElement_'));\n      this.renderers = [];\n      cardElements.forEach((cardElement, index) => {\n        const renderer = new WebGLRenderer({\n          antialias: true\n        });\n        const width = cardElement.offsetWidth;\n        const height = cardElement.offsetHeight;\n        renderer.setSize(width, height);\n        const cardContentElement = cardElement.querySelector('.card-content');\n        cardContentElement.appendChild(renderer.domElement);\n        this.renderers.push(renderer);\n        this.renderedCards.add(index);\n      });\n      this.animate();\n    },\n    animate() {\n      requestAnimationFrame(this.animate);\n      const cardElements = Object.values(this.$refs).filter(ref => ref.startsWith('cardElement_'));\n      cardElements.forEach((cardElement, index) => {\n        if (this.renderedCards.has(index)) {\n          const renderer = this.renderers[index];\n          const scene = drawSceneList[0].remove(plane);\n          const cardCamera = camera;\n          const width = cardElement.offsetWidth;\n          const height = cardElement.offsetHeight;\n          renderer.setSize(width, height);\n          renderer.render(scene, cardCamera);\n        }\n      });\n    },\n    shouldRender(index) {\n      const currentIndex = this.model - 1;\n      const minRenderIndex = Math.max(0, currentIndex - 1);\n      const maxRenderIndex = Math.min(currentIndex + 1, 3);\n      return index >= minRenderIndex && index <= maxRenderIndex;\n    }\n  }\n};","map":{"version":3,"names":["WebGLRenderer","camera","drawSceneList","plane","data","model","renderers","renderedCards","Set","mounted","initializeScene","methods","cardElements","Object","values","$refs","filter","ref","startsWith","forEach","cardElement","index","renderer","antialias","width","offsetWidth","height","offsetHeight","setSize","cardContentElement","querySelector","appendChild","domElement","push","add","animate","requestAnimationFrame","has","scene","remove","cardCamera","render","shouldRender","currentIndex","minRenderIndex","Math","max","maxRenderIndex","min"],"sources":["/Users/olliearrison/Desktop/SURA/src/components/LayerViewer.vue"],"sourcesContent":["<template>\n    <div class=\"layer-viewer\">\n      <v-sheet class=\"mx-auto\" elevation=\"0\" max-width=\"800\">\n        <v-slide-group v-model=\"model\" class=\"pa-4\" show-arrows>\n          <v-slide-group-item v-for=\"(n, index) in 4\" :key=\"n\" v-show=\"shouldRender(index)\">\n            <div class=\"card-wrapper\" :ref=\"`cardElement_${index}`\">\n              <v-card width=\"100\" height=\"100\" color=\"white\" class=\"transparent-card ma-4\">\n                <div class=\"card-content\">\n                  <div class=\"d-flex fill-height align-center justify-center\"></div>\n                </div>\n              </v-card>\n            </div>\n          </v-slide-group-item>\n        </v-slide-group>\n      </v-sheet>\n    </div>\n  </template>\n  \n  <script>\n  import { WebGLRenderer } from 'three';\n  import { camera, drawSceneList, plane } from '../App.vue';\n  \n  export default {\n    data() {\n      return {\n        model: null,\n        renderers: [],\n        renderedCards: new Set(),\n      };\n    },\n    mounted() {\n      this.initializeScene();\n    },\n    methods: {\n      initializeScene() {\n        const cardElements = Object.values(this.$refs).filter((ref) => ref.startsWith('cardElement_'));\n        this.renderers = [];\n  \n        cardElements.forEach((cardElement, index) => {\n          const renderer = new WebGLRenderer({ antialias: true });\n          const width = cardElement.offsetWidth;\n          const height = cardElement.offsetHeight;\n          renderer.setSize(width, height);\n  \n          const cardContentElement = cardElement.querySelector('.card-content');\n          cardContentElement.appendChild(renderer.domElement);\n  \n          this.renderers.push(renderer);\n          this.renderedCards.add(index);\n        });\n  \n        this.animate();\n      },\n      animate() {\n        requestAnimationFrame(this.animate);\n  \n        const cardElements = Object.values(this.$refs).filter((ref) => ref.startsWith('cardElement_'));\n        cardElements.forEach((cardElement, index) => {\n          if (this.renderedCards.has(index)) {\n            const renderer = this.renderers[index];\n            const scene = drawSceneList[0].remove(plane);\n            const cardCamera = camera;\n  \n            const width = cardElement.offsetWidth;\n            const height = cardElement.offsetHeight;\n            renderer.setSize(width, height);\n  \n            renderer.render(scene, cardCamera);\n          }\n        });\n      },\n      shouldRender(index) {\n        const currentIndex = this.model - 1;\n        const minRenderIndex = Math.max(0, currentIndex - 1);\n        const maxRenderIndex = Math.min(currentIndex + 1, 3);\n  \n        return index >= minRenderIndex && index <= maxRenderIndex;\n      },\n    },\n  };\n  </script>\n  \n  \n  <style scoped>\n\n  .slide-group {\n    color: rgb(176, 190, 197);\n    z-index: 1100;\n  }\n  .layer-viewer {\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    height: 6%;\n    z-index: 1100;\n    align-items: center;\n    justify-content: center;\n    display: flex;\n    color: rgb(176, 190, 197);\n  }\n  \n  .v-card {\n    background-color: transparent;\n    box-shadow: none;\n    color: rgb(176, 190, 197);\n  }\n  \n  .transparent-card {\n    background-color: transparent;\n    border: none;\n  }\n\n  .v-sheet {\n    position: fixed;\n    bottom: 0;\n    background-color: rgba(1, 1, 1, 0.7);\n    color: rgb(176, 190, 197);\n    border-radius: 5px;\n    width: 50%;\n  }\n  \n  .card-wrapper {\n    display: inline-block;\n  }\n  \n  .card-content {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  </style>\n  "],"mappings":";AAmBE,SAASA,aAAY,QAAS,OAAO;AACrC,SAASC,MAAM,EAAEC,aAAa,EAAEC,KAAI,QAAS,YAAY;AAEzD,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,IAAI;MACXC,SAAS,EAAE,EAAE;MACbC,aAAa,EAAE,IAAIC,GAAG,CAAC;IACzB,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,eAAe,CAAC,CAAC;EACxB,CAAC;EACDC,OAAO,EAAE;IACPD,eAAeA,CAAA,EAAG;MAChB,MAAME,YAAW,GAAIC,MAAM,CAACC,MAAM,CAAC,IAAI,CAACC,KAAK,CAAC,CAACC,MAAM,CAAEC,GAAG,IAAKA,GAAG,CAACC,UAAU,CAAC,cAAc,CAAC,CAAC;MAC9F,IAAI,CAACZ,SAAQ,GAAI,EAAE;MAEnBM,YAAY,CAACO,OAAO,CAAC,CAACC,WAAW,EAAEC,KAAK,KAAK;QAC3C,MAAMC,QAAO,GAAI,IAAItB,aAAa,CAAC;UAAEuB,SAAS,EAAE;QAAK,CAAC,CAAC;QACvD,MAAMC,KAAI,GAAIJ,WAAW,CAACK,WAAW;QACrC,MAAMC,MAAK,GAAIN,WAAW,CAACO,YAAY;QACvCL,QAAQ,CAACM,OAAO,CAACJ,KAAK,EAAEE,MAAM,CAAC;QAE/B,MAAMG,kBAAiB,GAAIT,WAAW,CAACU,aAAa,CAAC,eAAe,CAAC;QACrED,kBAAkB,CAACE,WAAW,CAACT,QAAQ,CAACU,UAAU,CAAC;QAEnD,IAAI,CAAC1B,SAAS,CAAC2B,IAAI,CAACX,QAAQ,CAAC;QAC7B,IAAI,CAACf,aAAa,CAAC2B,GAAG,CAACb,KAAK,CAAC;MAC/B,CAAC,CAAC;MAEF,IAAI,CAACc,OAAO,CAAC,CAAC;IAChB,CAAC;IACDA,OAAOA,CAAA,EAAG;MACRC,qBAAqB,CAAC,IAAI,CAACD,OAAO,CAAC;MAEnC,MAAMvB,YAAW,GAAIC,MAAM,CAACC,MAAM,CAAC,IAAI,CAACC,KAAK,CAAC,CAACC,MAAM,CAAEC,GAAG,IAAKA,GAAG,CAACC,UAAU,CAAC,cAAc,CAAC,CAAC;MAC9FN,YAAY,CAACO,OAAO,CAAC,CAACC,WAAW,EAAEC,KAAK,KAAK;QAC3C,IAAI,IAAI,CAACd,aAAa,CAAC8B,GAAG,CAAChB,KAAK,CAAC,EAAE;UACjC,MAAMC,QAAO,GAAI,IAAI,CAAChB,SAAS,CAACe,KAAK,CAAC;UACtC,MAAMiB,KAAI,GAAIpC,aAAa,CAAC,CAAC,CAAC,CAACqC,MAAM,CAACpC,KAAK,CAAC;UAC5C,MAAMqC,UAAS,GAAIvC,MAAM;UAEzB,MAAMuB,KAAI,GAAIJ,WAAW,CAACK,WAAW;UACrC,MAAMC,MAAK,GAAIN,WAAW,CAACO,YAAY;UACvCL,QAAQ,CAACM,OAAO,CAACJ,KAAK,EAAEE,MAAM,CAAC;UAE/BJ,QAAQ,CAACmB,MAAM,CAACH,KAAK,EAAEE,UAAU,CAAC;QACpC;MACF,CAAC,CAAC;IACJ,CAAC;IACDE,YAAYA,CAACrB,KAAK,EAAE;MAClB,MAAMsB,YAAW,GAAI,IAAI,CAACtC,KAAI,GAAI,CAAC;MACnC,MAAMuC,cAAa,GAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEH,YAAW,GAAI,CAAC,CAAC;MACpD,MAAMI,cAAa,GAAIF,IAAI,CAACG,GAAG,CAACL,YAAW,GAAI,CAAC,EAAE,CAAC,CAAC;MAEpD,OAAOtB,KAAI,IAAKuB,cAAa,IAAKvB,KAAI,IAAK0B,cAAc;IAC3D;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}