{"ast":null,"code":"import { draw } from \"./DrawHelper.js\";\n//import * as THREE from \"three\";\n//import { renderer, scene, camera } from \"../App.vue\";\n\nexport default {\n  name: 'DrawingInput',\n  data() {\n    return {\n      isDrawing: false,\n      stroke: {\n        show_stroke: true,\n        lineWidth: .01,\n        color: 0x000000\n      }\n    };\n  },\n  mounted() {\n    document.body.addEventListener('mouseup', event => {\n      if (this.valid(event)) {\n        this.handleMouseUp();\n      }\n    });\n    document.body.addEventListener('mousedown', event => {\n      if (this.valid(event)) {\n        this.handleMouseDown(event);\n      }\n    });\n    document.body.addEventListener('mousemove', event => {\n      if (this.valid(event)) {\n        this.handleMouseMove(event);\n      }\n    });\n  },\n  methods: {\n    valid(event) {\n      var rect = this.$refs.arcball.getBoundingClientRect();\n      var centerX = rect.left + rect.width / 2;\n      var centerY = rect.top + rect.height / 2;\n      const dx = event.clientX - centerX;\n      const dy = event.clientY - centerY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      console.log(centerX, centerY, dx, dy, distance);\n      if (distance < rect.width / 2) {\n        return false;\n      }\n      return true;\n    },\n    handleMouseMove(event) {\n      if (!this.isDrawing) return;\n      let x = event.clientX;\n      let y = event.clientY;\n      // Assuming a 2D drawing, so Z is constant, but this could be modified as per the requirement.\n      let z = 0;\n      draw.onMove(x, y, z);\n    },\n    handleMouseDown(event) {\n      console.log(\"mouse down\");\n      this.isDrawing = true;\n      console.log(event);\n      let x = event.clientX;\n      let y = event.clientY;\n      let z = 0;\n      draw.onStart(x, y, z, this.stroke);\n    },\n    handleMouseUp() {\n      this.isDrawing = false;\n      draw.onEnd();\n    }\n  }\n};","map":{"version":3,"names":["draw","name","data","isDrawing","stroke","show_stroke","lineWidth","color","mounted","document","body","addEventListener","event","valid","handleMouseUp","handleMouseDown","handleMouseMove","methods","rect","$refs","arcball","getBoundingClientRect","centerX","left","width","centerY","top","height","dx","clientX","dy","clientY","distance","Math","sqrt","console","log","x","y","z","onMove","onStart","onEnd"],"sources":["/Users/olliearrison/Desktop/SURA/src/components/DrawingInput.vue"],"sourcesContent":["<template>\n    <div class=\"drawing-input\" ></div>\n</template>\n  \n<script>\nimport { draw } from \"./DrawHelper.js\";\n//import * as THREE from \"three\";\n//import { renderer, scene, camera } from \"../App.vue\";\n\nexport default {\n    name: 'DrawingInput',\n    data(){\n        return {\n            isDrawing: false,\n            stroke: {\n                show_stroke: true,\n                lineWidth: .01,\n                color: 0x000000,\n            }\n        };\n    },\n    mounted (){\n\n\n        document.body.addEventListener('mouseup', (event) => {\n            if (this.valid(event)){\n                this.handleMouseUp()\n            }\n        });\n\n        document.body.addEventListener('mousedown', (event) => {\n            if (this.valid(event)){\n                this.handleMouseDown(event)\n            }\n        });\n\n        document.body.addEventListener('mousemove', (event) => {\n            if (this.valid(event)){\n                this.handleMouseMove(event)\n            }\n        });\n\n    },\n    methods: {\n        valid( event ) {\n            var rect = this.$refs.arcball.getBoundingClientRect();\n            var centerX = rect.left + rect.width / 2;\n            var centerY = rect.top + rect.height / 2;\n\n            const dx = event.clientX - centerX;\n            const dy = event.clientY - centerY;\n            const distance = Math.sqrt(dx * dx + dy * dy);\n\n            console.log(centerX, centerY, dx, dy, distance);\n\n            if (distance < rect.width/2){\n                return false;\n            }\n            return true;\n        },\n        handleMouseMove(event) {\n            if (!this.isDrawing) return;\n            let x = event.clientX;\n            let y = event.clientY;\n            // Assuming a 2D drawing, so Z is constant, but this could be modified as per the requirement.\n            let z = 0;\n            draw.onMove(x, y, z);\n        },\n        handleMouseDown(event) {\n            console.log(\"mouse down\");\n            this.isDrawing = true;\n            console.log(event);\n            let x = event.clientX;\n            let y = event.clientY;\n            let z = 0;\n            draw.onStart(x, y, z, this.stroke);\n        },\n        handleMouseUp() {\n            this.isDrawing = false;\n            draw.onEnd();\n        }\n    }\n}\n</script>\n\n<style scoped>\n.drawing-input {\n    width: 100%;\n    height: 100%;\n}\n</style>\n"],"mappings":"AAKA,SAASA,IAAG,QAAS,iBAAiB;AACtC;AACA;;AAEA,eAAe;EACXC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAE;IACF,OAAO;MACHC,SAAS,EAAE,KAAK;MAChBC,MAAM,EAAE;QACJC,WAAW,EAAE,IAAI;QACjBC,SAAS,EAAE,GAAG;QACdC,KAAK,EAAE;MACX;IACJ,CAAC;EACL,CAAC;EACDC,OAAMA,CAAA,EAAI;IAGNC,QAAQ,CAACC,IAAI,CAACC,gBAAgB,CAAC,SAAS,EAAGC,KAAK,IAAK;MACjD,IAAI,IAAI,CAACC,KAAK,CAACD,KAAK,CAAC,EAAC;QAClB,IAAI,CAACE,aAAa,CAAC;MACvB;IACJ,CAAC,CAAC;IAEFL,QAAQ,CAACC,IAAI,CAACC,gBAAgB,CAAC,WAAW,EAAGC,KAAK,IAAK;MACnD,IAAI,IAAI,CAACC,KAAK,CAACD,KAAK,CAAC,EAAC;QAClB,IAAI,CAACG,eAAe,CAACH,KAAK;MAC9B;IACJ,CAAC,CAAC;IAEFH,QAAQ,CAACC,IAAI,CAACC,gBAAgB,CAAC,WAAW,EAAGC,KAAK,IAAK;MACnD,IAAI,IAAI,CAACC,KAAK,CAACD,KAAK,CAAC,EAAC;QAClB,IAAI,CAACI,eAAe,CAACJ,KAAK;MAC9B;IACJ,CAAC,CAAC;EAEN,CAAC;EACDK,OAAO,EAAE;IACLJ,KAAKA,CAAED,KAAI,EAAI;MACX,IAAIM,IAAG,GAAI,IAAI,CAACC,KAAK,CAACC,OAAO,CAACC,qBAAqB,CAAC,CAAC;MACrD,IAAIC,OAAM,GAAIJ,IAAI,CAACK,IAAG,GAAIL,IAAI,CAACM,KAAI,GAAI,CAAC;MACxC,IAAIC,OAAM,GAAIP,IAAI,CAACQ,GAAE,GAAIR,IAAI,CAACS,MAAK,GAAI,CAAC;MAExC,MAAMC,EAAC,GAAIhB,KAAK,CAACiB,OAAM,GAAIP,OAAO;MAClC,MAAMQ,EAAC,GAAIlB,KAAK,CAACmB,OAAM,GAAIN,OAAO;MAClC,MAAMO,QAAO,GAAIC,IAAI,CAACC,IAAI,CAACN,EAAC,GAAIA,EAAC,GAAIE,EAAC,GAAIA,EAAE,CAAC;MAE7CK,OAAO,CAACC,GAAG,CAACd,OAAO,EAAEG,OAAO,EAAEG,EAAE,EAAEE,EAAE,EAAEE,QAAQ,CAAC;MAE/C,IAAIA,QAAO,GAAId,IAAI,CAACM,KAAK,GAAC,CAAC,EAAC;QACxB,OAAO,KAAK;MAChB;MACA,OAAO,IAAI;IACf,CAAC;IACDR,eAAeA,CAACJ,KAAK,EAAE;MACnB,IAAI,CAAC,IAAI,CAACT,SAAS,EAAE;MACrB,IAAIkC,CAAA,GAAIzB,KAAK,CAACiB,OAAO;MACrB,IAAIS,CAAA,GAAI1B,KAAK,CAACmB,OAAO;MACrB;MACA,IAAIQ,CAAA,GAAI,CAAC;MACTvC,IAAI,CAACwC,MAAM,CAACH,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC;IACxB,CAAC;IACDxB,eAAeA,CAACH,KAAK,EAAE;MACnBuB,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;MACzB,IAAI,CAACjC,SAAQ,GAAI,IAAI;MACrBgC,OAAO,CAACC,GAAG,CAACxB,KAAK,CAAC;MAClB,IAAIyB,CAAA,GAAIzB,KAAK,CAACiB,OAAO;MACrB,IAAIS,CAAA,GAAI1B,KAAK,CAACmB,OAAO;MACrB,IAAIQ,CAAA,GAAI,CAAC;MACTvC,IAAI,CAACyC,OAAO,CAACJ,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE,IAAI,CAACnC,MAAM,CAAC;IACtC,CAAC;IACDU,aAAaA,CAAA,EAAG;MACZ,IAAI,CAACX,SAAQ,GAAI,KAAK;MACtBH,IAAI,CAAC0C,KAAK,CAAC,CAAC;IAChB;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}