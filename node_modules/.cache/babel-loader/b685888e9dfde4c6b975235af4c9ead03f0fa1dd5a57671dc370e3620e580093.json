{"ast":null,"code":"import \"core-js/modules/esnext.typed-array.to-reversed.js\";\nimport \"core-js/modules/esnext.typed-array.to-sorted.js\";\nimport \"core-js/modules/esnext.typed-array.with.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport * as THREE from \"three\";\nimport { MeshLine, MeshLineMaterial, MeshLineRaycast } from \"three.meshline\";\nimport { scene, camera } from \"../App.vue\";\nlet draw = {\n  l: undefined,\n  draw: class {\n    constructor(stroke) {\n      this.stroke = stroke;\n      this.line = new MeshLine();\n      this.geometry = new THREE.BufferGeometry();\n      this.vertices = [];\n      this.geometry.setAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(this.vertices), 3));\n      this.material = new MeshLineMaterial({\n        lineWidth: this.stroke.show_stroke ? this.stroke.lineWidth : 1,\n        sizeAttenuation: 1,\n        color: this.stroke.show_stroke ? this.stroke.color : 0xFFFFFF,\n        side: THREE.DoubleSide,\n        fog: true,\n        wireframe: false,\n        alphaTest: 0.9,\n        blending: THREE.NormalBlending,\n        transparent: false,\n        resolution: new THREE.Vector2(window.innerWidth, window.innerHeight),\n        repeat: new THREE.Vector2(.1, .1),\n        opacity: 1\n      });\n      this.mesh = new THREE.Line(this.line.geometry, this.material);\n      this.mesh.raycast = MeshLineRaycast;\n    }\n    translate(x, y, z) {\n      console.log(x, y, z);\n      var vec = new THREE.Vector3(); // create once and reuse\n      var pos = new THREE.Vector3(); // create once and reuse\n\n      vec.set(x / window.innerWidth * 2 - 1, -(y / window.innerHeight) * 2 + 1, 0.5);\n      vec.unproject(camera);\n      vec.sub(camera.position).normalize();\n      var distance = -camera.position.z / vec.z;\n      pos.copy(camera.position).add(vec.multiplyScalar(distance));\n      return pos;\n    }\n    start() {\n      console.log(\"start\");\n      this.createThing();\n      scene.add(this.mesh);\n    }\n    move(x, y, z) {\n      var v3 = this.translate(x, y, z);\n      //var v3 = new THREE.Vector3(x, y, z);\n      //v3.unproject(camera);\n      this.vertices = [...this.vertices, v3.x, v3.y, v3.z];\n      this.geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(this.vertices), 3));\n      this.line.setGeometry(this.geometry); // This updates the MeshLine's geometry\n    }\n\n    end() {\n      this.geometry.computeBoundingSphere();\n      //renderer.render(scene, camera);\n    }\n\n    createThing() {\n      const points = [];\n      for (let j = 0; j < Math.PI; j += 2 * Math.PI / 100) {\n        points.push(new THREE.Vector3(Math.cos(j), Math.sin(j), 0));\n      }\n      const geometry = new THREE.BufferGeometry().setFromPoints(points);\n      const lineNew = new MeshLine();\n      lineNew.setGeometry(geometry);\n      lineNew.setPoints(points);\n      const mesh = new THREE.Mesh(lineNew, this.material);\n      scene.add(mesh);\n    }\n  },\n  onStart: function (x, y, z, stroke) {\n    this.l = new this.draw(stroke);\n    this.l.move(x, y, z);\n    this.l.start();\n  },\n  onMove: function (x, y, z) {\n    //console.log(x, y, z);\n    this.l.move(x, y, z);\n  },\n  onEnd: function () {\n    this.l.end();\n  }\n};\nexport { draw };","map":{"version":3,"names":["THREE","MeshLine","MeshLineMaterial","MeshLineRaycast","scene","camera","draw","l","undefined","constructor","stroke","line","geometry","BufferGeometry","vertices","setAttribute","BufferAttribute","Float32Array","material","lineWidth","show_stroke","sizeAttenuation","color","side","DoubleSide","fog","wireframe","alphaTest","blending","NormalBlending","transparent","resolution","Vector2","window","innerWidth","innerHeight","repeat","opacity","mesh","Line","raycast","translate","x","y","z","console","log","vec","Vector3","pos","set","unproject","sub","position","normalize","distance","copy","add","multiplyScalar","start","createThing","move","v3","setGeometry","end","computeBoundingSphere","points","j","Math","PI","push","cos","sin","setFromPoints","lineNew","setPoints","Mesh","onStart","onMove","onEnd"],"sources":["/Users/olliearrison/Desktop/SURA/src/components/DrawHelper.js"],"sourcesContent":["import * as THREE from \"three\";\nimport { MeshLine, MeshLineMaterial, MeshLineRaycast } from \"three.meshline\";\nimport { scene, camera } from \"../App.vue\";\n\nlet draw = {\n    l: undefined,\n    draw: class {\n        constructor(stroke) {\n            this.stroke = stroke;\n            this.line = new MeshLine();\n            this.geometry = new THREE.BufferGeometry();\n            this.vertices = [];\n            this.geometry.setAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(this.vertices), 3));\n            this.material = new MeshLineMaterial({\n                lineWidth: this.stroke.show_stroke ? this.stroke.lineWidth : 1,\n                sizeAttenuation: 1,\n                color: this.stroke.show_stroke ? this.stroke.color : 0xFFFFFF,\n                side: THREE.DoubleSide,\n                fog: true,\n                wireframe: false,\n                alphaTest: 0.9,\n                blending: THREE.NormalBlending,\n                transparent: false,\n                resolution: new THREE.Vector2(window.innerWidth, window.innerHeight),\n                repeat: new THREE.Vector2(.1, .1),\n                opacity: 1,\n            });\n            this.mesh = new THREE.Line(this.line.geometry, this.material);\n            this.mesh.raycast = MeshLineRaycast;\n        }\n\n        translate(x, y, z) {\n            console.log(x, y, z);\n            var vec = new THREE.Vector3(); // create once and reuse\n            var pos = new THREE.Vector3(); // create once and reuse\n\n            vec.set(\n                ( x / window.innerWidth ) * 2 - 1,\n                - ( y / window.innerHeight ) * 2 + 1,\n                0.5 );\n\n            vec.unproject( camera );\n\n            vec.sub( camera.position ).normalize();\n\n            var distance = - camera.position.z / vec.z;\n\n            pos.copy( camera.position ).add( vec.multiplyScalar( distance ) );\n\n            return pos;\n                    \n        }\n\n        start() {\n            console.log(\"start\");\n            this.createThing();\n            scene.add(this.mesh);\n        }\n\n        move(x, y, z) {\n            var v3 = this.translate(x, y, z);\n            //var v3 = new THREE.Vector3(x, y, z);\n            //v3.unproject(camera);\n            this.vertices = [...this.vertices, v3.x, v3.y, v3.z];\n            this.geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(this.vertices), 3));\n            this.line.setGeometry(this.geometry);  // This updates the MeshLine's geometry\n        }\n\n        end() {\n            this.geometry.computeBoundingSphere();\n            //renderer.render(scene, camera);\n        }\n\n        createThing() {\n            const points = [];\n            for (let j = 0; j < Math.PI; j += 2 * Math.PI / 100) {\n                points.push(new THREE.Vector3(Math.cos(j), Math.sin(j), 0));\n            }\n            const geometry = new THREE.BufferGeometry().setFromPoints(points);\n            \n            const lineNew = new MeshLine();\n            lineNew.setGeometry(geometry);\n            lineNew.setPoints(points);\n            const mesh = new THREE.Mesh(lineNew, this.material);\n            scene.add(mesh);\n        }\n\n    },\n    onStart: function (x, y, z, stroke) {\n        this.l = new this.draw(stroke);\n        this.l.move(x, y, z);\n        this.l.start();\n    },\n    onMove: function (x, y, z) {\n        //console.log(x, y, z);\n        this.l.move(x, y, z);\n    },\n    onEnd: function () {\n        this.l.end();\n    },\n}\n\nexport { draw }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}