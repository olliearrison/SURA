{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport LayerViewer from \"./LayerViewer.vue\";\nimport { draw } from \"./DrawHelper.js\";\nimport { HistoryController } from \"./HistoryController.js\";\nimport { arcRenderer, drawSceneList } from '../App.vue';\nimport * as THREE from 'three';\nexport let index = 0;\nlet drawing = false;\nlet rotatingInterval = null; // Interval to rotate index\nlet historyController = new HistoryController();\nexport default {\n  name: 'DrawingInput',\n  components: {\n    LayerViewer\n  },\n  data() {\n    return {\n      icons: ['mdi-cylinder', 'mdi-square', 'mdi-sphere'],\n      currentIconIndex: 0,\n      isDrawing: false,\n      rotatingCondition: false,\n      stroke: {\n        show_stroke: true,\n        lineWidth: .25,\n        color: 0x000000,\n        eraser: false\n      },\n      showColorPicker: false,\n      onionSkin: false,\n      canUndo: false,\n      canRedo: false,\n      sizeMultiplier: .5,\n      newMode: false\n    };\n  },\n  computed: {\n    color: {\n      get() {\n        // Convert color from 0xRRGGBB to #RRGGBB when getting\n        return '#' + this.stroke.color.toString(16).padStart(6, '0');\n      },\n      set(value) {\n        // Convert color from #RRGGBB to 0xRRGGBB when setting\n        this.stroke.color = parseInt(value.slice(1), 16);\n      }\n    }\n  },\n  mounted() {\n    this.$watch(() => this.rotatingCondition, newValue => {\n      console.log(\"hello\");\n      if (newValue) {\n        if (rotatingInterval == null) {\n          console.log(\"hello\");\n          // Rotate the index 5 times per second\n          rotatingInterval = setInterval(() => {\n            index = (index + 1) % drawSceneList.length;\n          }, 1000 / 5); // 1000 ms (1s) divided by 5 gives 200 ms\n        }\n      } else {\n        // Stop rotating the index\n        if (rotatingInterval != null) {\n          clearInterval(rotatingInterval);\n          rotatingInterval = null;\n        }\n      }\n    });\n    // document.body \n    /*\n    const button = this.$refs.eraserButton;\n    \n    button.addEventListener('click', () => {\n        console.log(\"pointer down\");\n        this.isEraserMode = !this.isEraserMode;\n    });\n    */\n\n    document.body.addEventListener('mouseup', event => {\n      if (this.inCanvas(event)) {\n        this.handleMouseUp();\n        drawing = false;\n      }\n    });\n    document.body.addEventListener('mousedown', event => {\n      if (this.inCanvas(event)) {\n        drawing = true;\n        this.handleMouseDown(event);\n      }\n    });\n    document.body.addEventListener('pointermove', event => {\n      if (event.pressure > 0) {\n        this.stroke.lineWidth = event.pressure * .5 * this.sizeMultiplier;\n      }\n    });\n    document.body.addEventListener('mousemove', event => {\n      //console.log(event.pressure);\n      if (this.inCanvas(event)) {\n        if (drawing) {\n          this.handleMouseMove(event);\n        }\n      } else {\n        if (drawing) {\n          this.handleMouseUp();\n          drawing = false;\n        }\n      }\n    });\n    //this.handleMouseMove(event);\n  },\n\n  methods: {\n    inCanvas(event) {\n      var rect = arcRenderer.domElement.getBoundingClientRect();\n      var centerX = rect.left + rect.width / 2;\n      var centerY = rect.top + rect.height / 2;\n      const dx = event.clientX - centerX;\n      const dy = event.clientY - centerY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      if (distance < rect.width / 2) {\n        return false;\n      }\n      return true;\n    },\n    handleMouseMove(event) {\n      if (!this.isDrawing) return;\n      let x = event.clientX;\n      let y = event.clientY;\n      // Assuming a 2D drawing, so Z is constant, but this could be modified as per the requirement.\n      draw.onMove(x, y, this.stroke);\n    },\n    handleMouseDown(event) {\n      //console.log(\"mouse down\");\n      this.isDrawing = true;\n      let x = event.clientX;\n      let y = event.clientY;\n      draw.onStart(x, y, this.stroke);\n      this.canUndo = historyController.canUndo();\n      this.canRedo = historyController.canRedo();\n    },\n    handleMouseUp() {\n      this.isDrawing = false;\n      let result = draw.onEnd(this.stroke);\n      if (result[0] != false) {\n        historyController.action(result);\n      }\n      this.canUndo = historyController.canUndo();\n      this.canRedo = historyController.canRedo();\n      //console.log(this.canUndo);\n    },\n\n    toggleEraserMode() {\n      this.stroke.eraser = !this.stroke.eraser;\n    },\n    toggleColorSelect() {\n      console.log(this.showColorPicker);\n      this.showColorPicker = !this.showColorPicker;\n    },\n    toggleOnionSkin() {\n      this.onionSkin = !this.onionSkin;\n    },\n    toggleNewMode() {\n      this.newMode = !this.newMode;\n    },\n    backward() {\n      if (index > 0) {\n        index--;\n        historyController = new HistoryController();\n      }\n    },\n    forward() {\n      console.log(index);\n      console.log(\"forward\");\n      if (index < drawSceneList.length - 1) {\n        index++;\n      } else {\n        const newScene = new THREE.Scene();\n        drawSceneList.push(newScene);\n        historyController = new HistoryController();\n        index++;\n      }\n      const layerViewer = this.$refs.layerViewer;\n\n      // Call the function in the child component\n      layerViewer.updateLayers();\n    },\n    play() {\n      this.rotatingCondition = !this.rotatingCondition;\n      this.isDrawing = this.rotatingCondition;\n    },\n    undo() {\n      historyController.undo();\n      this.canRedo = historyController.canRedo();\n    },\n    redo() {\n      historyController.redo();\n      this.canUndo = historyController.canUndo();\n    },\n    updateSizeMultiplier() {\n      // .5 is the constant multiplier\n      // this is multiplied by .5, the default pressure\n      this.stroke.lineWidth = .25 * this.sizeMultiplier;\n    },\n    handleCardSelected(selectedIndex) {\n      // Use the selected index as needed\n      console.log('Selected index:', selectedIndex);\n      index = selectedIndex;\n    },\n    nextIcon() {\n      this.currentIconIndex = (this.currentIconIndex + 1) % this.icons.length;\n      this.showColorPicker = !this.showColorPicker;\n    }\n  }\n};","map":{"version":3,"names":["LayerViewer","draw","HistoryController","arcRenderer","drawSceneList","THREE","index","drawing","rotatingInterval","historyController","name","components","data","icons","currentIconIndex","isDrawing","rotatingCondition","stroke","show_stroke","lineWidth","color","eraser","showColorPicker","onionSkin","canUndo","canRedo","sizeMultiplier","newMode","computed","get","toString","padStart","set","value","parseInt","slice","mounted","$watch","newValue","console","log","setInterval","length","clearInterval","document","body","addEventListener","event","inCanvas","handleMouseUp","handleMouseDown","pressure","handleMouseMove","methods","rect","domElement","getBoundingClientRect","centerX","left","width","centerY","top","height","dx","clientX","dy","clientY","distance","Math","sqrt","x","y","onMove","onStart","result","onEnd","action","toggleEraserMode","toggleColorSelect","toggleOnionSkin","toggleNewMode","backward","forward","newScene","Scene","push","layerViewer","$refs","updateLayers","play","undo","redo","updateSizeMultiplier","handleCardSelected","selectedIndex","nextIcon"],"sources":["/Users/olliearrison/Desktop/SURA/src/components/DrawingInput.vue"],"sourcesContent":["<template>\n    <div class=\"drawing-input\" >\n        <LayerViewer @card-selected=\"handleCardSelected\" ref=\"layerViewer\"/>\n        <v-app>\n            <v-color-picker v-if=\"showColorPicker\" v-model=\"color\"></v-color-picker>\n\n            <v-app-bar class=\"small-bar justify-center\" >\n                <div class=\"spacer\"></div>\n                <v-btn icon class=\"fixed-button\" @click=\"toggleColorSelect\">\n                    <v-icon>mdi-home</v-icon>\n                </v-btn>\n                <div class=\"spacer\"></div>\n                <v-btn icon class=\"fixed-button\">\n                    <v-icon>mdi-file</v-icon>\n                </v-btn>\n                <v-spacer></v-spacer>\n                <v-btn icon class=\"fixed-button\" @click=\"toggleNewMode\">\n                    <v-icon>\n                        {{ newMode ? 'mdi-toggle-switch-outline' : 'mdi-toggle-switch-off-outline' }}\n                    </v-icon>\n                </v-btn>\n                <div class=\"spacer\"></div>\n                <v-btn icon class=\"fixed-button\">\n                    <v-icon>mdi-target</v-icon>\n                </v-btn>\n                <div class=\"spacer\"></div>\n                <v-btn icon class=\"fixed-button\" ref=\"eraserButton\" @click=\"toggleEraserMode\">\n                    <v-icon>\n                    {{ stroke.eraser ? 'mdi-eraser' : 'mdi-brush-outline' }}\n                    </v-icon>\n                </v-btn>\n                <div class=\"spacer\"></div>\n                <v-btn icon class=\"fixed-button\">\n                    <v-icon>mdi-layers-outline</v-icon>\n                </v-btn>\n                <div class=\"spacer\"></div>\n                <v-btn icon class=\"fixed-button\" @click=\"toggleOnionSkin\">\n                    <v-icon>\n                        {{ onionSkin ? 'mdi-animation' : 'mdi-animation-outline' }}\n                    </v-icon>\n                </v-btn>\n                \n            </v-app-bar>\n\n        \n\n\n            <v-card class=\"pa-2\" outlined>\n                <v-container class=\"align-center\">\n                    <v-row justify=\"center\">\n                        <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                            <v-slider\n                                show-ticks\n                                class=\"my-slider\"\n                                color=\"blue-grey-lighten-3\"\n                                density=\"compact\"\n                                track-size=\"15\"\n                                direction=\"vertical\"\n                                v-model=\"sizeMultiplier\"\n                                :step=\"0.1\"\n                                :min=\"0.4\"\n                                :max=\"1.5\"\n                                @click=\"updateSizeMultiplier\"\n                                >\n                            </v-slider>\n                        </v-col>\n                    </v-row>\n\n                    <v-row justify=\"center\">\n                        <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                            <v-btn icon class=\"fixed-button\" @click=\"showColorPicker = !showColorPicker\">\n                                        <v-icon>mdi-palette</v-icon>\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n\n                    <v-row justify=\"center\">\n                        <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                            <v-btn icon class=\"fixed-button\" @click=\"nextIcon\">\n                                <v-icon>{{ icons[currentIconIndex] }}</v-icon>\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n\n                    <v-row justify=\"center\">\n                        <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                            <v-btn icon class=\"fixed-button custom-button\" :style=\"{ color: canRedo ? '#B0BEC5' : '#78909C'}\" @click=\"redo\">\n                                        <v-icon>mdi-arrow-u-right-top</v-icon>\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n\n                    <v-row justify=\"center\">\n                        <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                            <v-btn icon class=\"fixed-button custom-button\" :style=\"{ color: canUndo ? '#B0BEC5' : '#78909C'}\" @click=\"undo\">\n                                        <v-icon>mdi-arrow-u-left-top</v-icon>\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n                </v-container>\n            </v-card>\n            \n            \n            <v-row class=\"bottom-buttons\">\n                <v-btn class=\"fixed-button\" @click=\"backward\" large>\n                    <v-icon>\n                        mdi-arrow-left\n                    </v-icon>\n                </v-btn>\n                <v-spacer></v-spacer>\n                <v-btn class=\"fixed-button\" @click=\"forward\" large>\n                    <v-icon>\n                        mdi-arrow-right\n                    </v-icon>\n                </v-btn>\n                <v-spacer></v-spacer>\n                <v-btn class=\"fixed-button\" @click=\"play\" large>\n                    <v-icon>\n                        {{ rotatingCondition ? 'mdi-pause' : 'mdi-play' }}\n                    </v-icon>\n                </v-btn>\n            </v-row>\n    </v-app>\n    </div>\n    \n</template>\n  \n<script>\nimport LayerViewer from \"./LayerViewer.vue\";\nimport { draw } from \"./DrawHelper.js\";\nimport { HistoryController } from \"./HistoryController.js\";\nimport { arcRenderer, drawSceneList } from '../App.vue';\nimport * as THREE from 'three';\n\nexport let index = 0;\nlet drawing = false;\n\nlet rotatingInterval = null;  // Interval to rotate index\nlet historyController = new HistoryController();\n\nexport default {\n    name: 'DrawingInput',\n    components: {\n        LayerViewer,\n    },\n\n    data(){\n        return {\n            icons: ['mdi-cylinder', 'mdi-square', 'mdi-sphere'],\n            currentIconIndex: 0,\n            isDrawing: false,\n            rotatingCondition: false,\n            stroke: {\n                show_stroke: true,\n                lineWidth: .25,\n                color: 0x000000,\n                eraser: false,\n                \n                \n            },\n            showColorPicker: false,\n            onionSkin: false,\n            canUndo: false,\n            canRedo: false,\n            sizeMultiplier: .5,\n            newMode: false,\n        };\n    },\n    computed: {\n        color: {\n        get() {\n            // Convert color from 0xRRGGBB to #RRGGBB when getting\n            return '#' + this.stroke.color.toString(16).padStart(6, '0');\n        },\n        set(value) {\n            // Convert color from #RRGGBB to 0xRRGGBB when setting\n            this.stroke.color = parseInt(value.slice(1), 16);\n        },\n        },\n    },\n    mounted (){\n        this.$watch(() => this.rotatingCondition, (newValue) => {\n            console.log(\"hello\");\n            if(newValue){\n                if(rotatingInterval == null){\n                    console.log(\"hello\");\n                    // Rotate the index 5 times per second\n                    rotatingInterval = setInterval(() => {\n                        index = (index + 1) % drawSceneList.length;\n                    }, 1000/5); // 1000 ms (1s) divided by 5 gives 200 ms\n                }\n            }else{\n                // Stop rotating the index\n                if(rotatingInterval != null){\n                    clearInterval(rotatingInterval);\n                    rotatingInterval = null;\n                }\n            }\n        });\n        // document.body \n        /*\n        const button = this.$refs.eraserButton;\n        \n        button.addEventListener('click', () => {\n            console.log(\"pointer down\");\n            this.isEraserMode = !this.isEraserMode;\n        });\n        */\n\n\n        document.body.addEventListener('mouseup', (event) => {\n            if (this.inCanvas(event)){\n                this.handleMouseUp();\n                drawing = false;\n            }\n        });\n\n        document.body.addEventListener('mousedown', (event) => {\n            if (this.inCanvas(event)) {\n                drawing = true;\n                this.handleMouseDown(event);\n            }\n        });\n\n        document.body.addEventListener('pointermove', (event) => {\n            if (event.pressure > 0){\n                this.stroke.lineWidth = event.pressure * .5 * this.sizeMultiplier;\n            }\n\n        });\n\n        document.body.addEventListener('mousemove', (event) => {\n            //console.log(event.pressure);\n            if (this.inCanvas(event)) {\n                if (drawing) {\n                    this.handleMouseMove(event);\n                }\n            } else {\n                if (drawing){\n                    this.handleMouseUp();\n                    drawing = false;\n                }\n            }\n        });\n        //this.handleMouseMove(event);\n\n       \n\n    },\n    methods: {\n        inCanvas( event ) {\n            var rect = arcRenderer.domElement.getBoundingClientRect();\n            var centerX = rect.left + rect.width / 2;\n            var centerY = rect.top + rect.height / 2;\n\n            const dx = event.clientX - centerX;\n            const dy = event.clientY - centerY;\n            const distance = Math.sqrt(dx * dx + dy * dy);\n\n            if (distance < rect.width/2){\n                return false;\n            }\n            return true;\n        },\n        handleMouseMove(event) {\n            if (!this.isDrawing) return;\n            let x = event.clientX;\n            let y = event.clientY;\n            // Assuming a 2D drawing, so Z is constant, but this could be modified as per the requirement.\n            draw.onMove(x, y, this.stroke);\n        },\n        handleMouseDown(event) {\n            //console.log(\"mouse down\");\n            this.isDrawing = true;\n            let x = event.clientX;\n            let y = event.clientY;\n            draw.onStart(x, y, this.stroke);\n            this.canUndo = historyController.canUndo();\n            this.canRedo = historyController.canRedo();\n        },\n        handleMouseUp() {\n            this.isDrawing = false;\n            let result = draw.onEnd(this.stroke);\n            if (result[0] != false){\n                historyController.action(result);\n            }\n            this.canUndo = historyController.canUndo();\n            this.canRedo = historyController.canRedo();\n            //console.log(this.canUndo);\n        },\n        toggleEraserMode() {\n            this.stroke.eraser = !this.stroke.eraser;\n        },\n        toggleColorSelect(){\n            console.log(this.showColorPicker);\n            this.showColorPicker = !this.showColorPicker;\n        },\n        toggleOnionSkin(){\n            this.onionSkin = !this.onionSkin;\n        },\n        toggleNewMode(){\n            this.newMode = !this.newMode;\n        },\n        backward() {\n            if (index > 0){\n                index--;\n                historyController = new HistoryController();\n            }\n        },\n        forward() {\n            console.log(index);\n            console.log(\"forward\");\n            if (index < drawSceneList.length - 1){\n                index++;\n            } else {\n                const newScene = new THREE.Scene();\n                drawSceneList.push(newScene);\n                historyController = new HistoryController();\n                index++;\n            }\n            const layerViewer = this.$refs.layerViewer;\n      \n            // Call the function in the child component\n            layerViewer.updateLayers();\n        },\n        play() {\n            this.rotatingCondition = !this.rotatingCondition;\n            this.isDrawing = this.rotatingCondition;\n        },\n        undo(){\n            historyController.undo();\n            this.canRedo = historyController.canRedo();\n        },\n        redo(){\n            historyController.redo();\n            this.canUndo = historyController.canUndo();\n        },\n        updateSizeMultiplier() {\n            // .5 is the constant multiplier\n            // this is multiplied by .5, the default pressure\n            this.stroke.lineWidth = .25 * this.sizeMultiplier;\n        },\n        handleCardSelected(selectedIndex) {\n        // Use the selected index as needed\n            console.log('Selected index:', selectedIndex);\n            index = selectedIndex;\n        },\n        nextIcon() {\n        this.currentIconIndex = (this.currentIconIndex + 1) % this.icons.length;\n        this.showColorPicker = !this.showColorPicker;\n        },\n    }\n}\n</script>\n\n<style scoped>\n.drawing-input {\n    width: 100%;\n    height: 100%;\n}\n\n.fixed-button {\n  z-index: 1200;\n  background-color: rgb(33, 33, 33);\n  color: rgb(176, 190, 197);\n}\n\n.v-card {\n  position: fixed;\n  top: 10%;\n  bottom: 90%;\n  left: 1%;\n  display: flex;\n  align-items: center;\n  z-index: 998;\n  height: 80%;\n  width: 5%;\n  justify-content: flex-start;\n  background-color: rgba(1, 1, 1, 0.7);\n}\n\n.button-container {\n  position: fixed;\n  top: 2%;\n  left: 2%;\n  height: 50%;\n  z-index: 999;\n  width: 10%;\n}\n\n.spacer {\n  width: 1%;\n  height: 1%;\n}\n\n.small-bar {\n  height: 8%;  /* Adjust this value as needed */\n  background-color: rgba(1, 1, 1, 0.7) !important;\n}\n\n.bottom-buttons {\n  position: fixed;\n  width: 20%;\n  bottom: 40px; /* Adjust the bottom value as needed */\n  left: 2%; /* Adjust the right value as needed */\n  z-index: 999; /* Set an appropriate z-index if necessary */\n  /* Add any other desired styles */\n}\n\n.v-color-picker {\n    position: fixed;\n    top: 10%;\n    left: 10%;\n    z-index: 1001;\n}\n\n.custom-button {\n  color: inherit;\n}\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}